set-option -g update-environment "DBUS_SESSION_BUS_ADDRESS DISPLAY WINDOWID SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION XAUTHORITY XDG_SESSION_COOKIE"

# Change the prefix key to ^a -- like GNU Screen.
set-option -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

set -s set-clipboard on
setw -g aggressive-resize on
set -g lock-server off
set -g lock-after-time 1800
set -g lock-command 'tput civis && zsh -c "read -s -k 1"'
set -g history-limit 10000
set -g default-terminal "xterm-256"
set -g default-shell /usr/bin/zsh
set -g pane-border-fg white
set -g pane-border-bg default
set -g pane-active-border-fg green
set -g pane-active-border-bg red
set -g set-titles on
set -g terminal-overrides '*88col*:colors=88,*256col*:colors=256,rxvt-uni*:XT:Ms=\E]52;%p1%s;%p2%s\007:Cc=\E]12;%p1%s\007:Cr=\E]12;green\007:Cs=\E]777;Cs;%p1%d\007,xterm*:smcup@:rmcup@'
set -g renumber-windows on

unbind-key a
unbind-key c
unbind-key n
unbind-key o
unbind-key p
unbind-key r
unbind-key s
unbind-key t
unbind-key w
unbind-key A
unbind-key S
unbind-key .
unbind-key "'"
unbind-key '#'
unbind-key ' '
unbind-key ^x

# Place window after target window
bind c new-window -a

bind d detach-client
bind ^d detach-client

bind "/" command-prompt "find-window '%%'"

unbind-key l
bind l command-prompt "switch-client -t '%%'"

bind a send-prefix

bind w choose-window
bind ^w choose-window
bind ' ' choose-window
bind p previous-window
bind ^p previous-window
bind n next-window
bind ^n next-window
bind "|" split-window -h
bind "-" split-window -v
bind ^a last-window
bind -n C-Left previous-window
bind -n C-Right next-window

bind o select-pane -D
bind ^o select-pane -D

bind s choose-tree

bind t clock-mode
bind ^t clock-mode

bind k confirm-before kill-pane
bind W command-prompt "rename-window '%%'"
bind S command-prompt "rename-session '%%'"
bind . display-panes
bind "'" command-prompt -p "SSH: " "new-window -a -n %1 'ssh %1'"

bind ^c new-window -a
bind ^i display-message
bind ^r refresh-client
bind ^s choose-session
bind ^k confirm-before kill-pane
bind & confirm-before unlinkw -k

bind -r C-Left swapw -t:-
bind-key r source-file ~/.tmux.conf \; display-message ".tmux.conf Reloaded"

# Status stuff.
set -g status-bg blue
set -g status-fg cyan
set -g status-left-fg white
set -g status-left-bg magenta
set -g status-left-length 30
set -g status-left "#S "
set -g status-right-length 30
set -g status-right-fg white
set -g status-right-bg blue
set -g status-right "[%a %d/%m %H:%M]"
set -g display-panes-active-colour red
set -g display-panes-colour green
set -g display-panes-time 4000
# set -g window-status-bell-style reverse

setw -g mode-bg blue
setw -g mode-fg yellow

# setw -g mouse on
set-option -g mode-mouse on
set-option -g mouse-select-pane on
set-option -g mouse-resize-pane on
set-option -g mouse-select-window on
setw -g mode-keys vi
setw -g mode-fg white

setw -g window-status-separator "| "
setw -g window-status-format "#I:#W:#{?window_linked,+#{window_flags},#{window_flags} }"
setw -g window-status-current-format "#[fg=black,bg=green]#I:#W:#{?window_linked,+#{window_flags},#{window_flags}}"
#setw -g window-status-current-format "#[fg=black,bg=colour132]#I:#W:#[fg=black]#F"

set-window-option -g clock-mode-colour colour69
set-window-option -g clock-mode-style 24

# # Sessions
# new -d -smisc -ndstat 'exec dstat -clp --top-bio 5'
# new -d -swork -nwmail 'exec mutt'
# neww -d -nhmail 'exec mutt -F ~/.muttrc-gmail'
# neww -d -nmusic 'exec ncmpcpp'
# neww -d
# neww -d
# neww -d

# set -t misc lock-after-time 0
# set -t misc:dstat remain-on-exit on

# set -t work:wmail remain-on-exit on
# set -t work:hmail remain-on-exit on
# set -t work:music remain-on-exit on

# # new -d -sirc -nfnirc 'ssh -t n6tadam@xteddy.org tmux a -tirc'
# neww -d -nswirc 'exec weechat'
# neww -d -nfinch 'exec finch'
# #neww -d -nswirc 'exec irssi --home=/home/local/.irssi --config=/home/local/.irssi/config'

# set -t irc:fnirc remain-on-exit on
# set -t irc:swirc remain-on-exit on
# set -t irc:finch remain-on-exit on

# select-window -twork:wmail
# select-window -tirc:fnirc
# select-window -tmisc:dstat
